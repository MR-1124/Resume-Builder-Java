================================================================================
                    RESUME BUILDER - APPLICATION FLOW
================================================================================

┌─────────────────────────────────────────────────────────────────────────────┐
│                         USER AUTHENTICATION FLOW                            │
└─────────────────────────────────────────────────────────────────────────────┘

    ┌──────────┐
    │  START   │
    └────┬─────┘
         │
         ▼
    ┌─────────────────┐
    │  Login Page     │◄──────────────┐
    │  /login         │               │
    └────┬────────────┘               │
         │                             │
    ┌────▼────────┐                   │
    │ Has Account?│                   │
    └─┬─────────┬─┘                   │
      │ No      │ Yes                 │
      │         │                     │
      ▼         ▼                     │
┌──────────┐  ┌──────────────┐       │
│ Signup   │  │ Enter Email  │       │
│ /signup  │  │ & Password   │       │
└────┬─────┘  └──────┬───────┘       │
     │               │                │
     │               ▼                │
     │        ┌──────────────┐        │
     │        │ Authenticate │        │
     │        │ (BCrypt)     │        │
     │        └──────┬───────┘        │
     │               │                │
     │          ┌────▼────┐           │
     │          │ Valid?  │           │
     │          └─┬─────┬─┘           │
     │            │ No  │ Yes         │
     │            │     │             │
     │            │     ▼             │
     │            │  ┌──────────────┐ │
     │            │  │ Create       │ │
     │            │  │ Session      │ │
     │            │  └──────┬───────┘ │
     │            │         │         │
     │            └─────────┤         │
     │                      │         │
     └──────────────────────┤         │
                            ▼         │
                     ┌──────────────┐ │
                     │  Dashboard   │ │
                     │  /dashboard  │ │
                     └──────────────┘ │
                            │         │
                            └─────────┘

================================================================================

┌─────────────────────────────────────────────────────────────────────────────┐
│                         RESUME CREATION FLOW                                │
└─────────────────────────────────────────────────────────────────────────────┘

    ┌──────────────┐
    │  Dashboard   │
    └──────┬───────┘
           │
           ▼
    ┌──────────────────┐
    │ Click "Create    │
    │ New Resume"      │
    └──────┬───────────┘
           │
           ▼
    ┌──────────────────────────────────────┐
    │  Create Resume Form                  │
    │  /resume/                            │
    │                                      │
    │  ┌────────────────────────────────┐ │
    │  │ 1. Resume Details              │ │
    │  │    - Title                     │ │
    │  │    - Template (Classic/Modern) │ │
    │  └────────────────────────────────┘ │
    │                                      │
    │  ┌────────────────────────────────┐ │
    │  │ 2. Personal Information        │ │
    │  │    - Name, Email, Phone        │ │
    │  │    - Address, LinkedIn, GitHub │ │
    │  │    - Professional Summary      │ │
    │  └────────────────────────────────┘ │
    │                                      │
    │  ┌────────────────────────────────┐ │
    │  │ 3. Education (Dynamic)         │ │
    │  │    [Add Education] button      │ │
    │  │    - Institution, Degree       │ │
    │  │    - Field, Dates, Grade       │ │
    │  └────────────────────────────────┘ │
    │                                      │
    │  ┌────────────────────────────────┐ │
    │  │ 4. Experience (Dynamic)        │ │
    │  │    [Add Experience] button     │ │
    │  │    - Company, Position         │ │
    │  │    - Type, Dates, Description  │ │
    │  └────────────────────────────────┘ │
    │                                      │
    │  ┌────────────────────────────────┐ │
    │  │ 5. Projects (Dynamic)          │ │
    │  │    [Add Project] button        │ │
    │  │    - Name, Description         │ │
    │  │    - Technologies, Link        │ │
    │  └────────────────────────────────┘ │
    │                                      │
    │  ┌────────────────────────────────┐ │
    │  │ 6. Skills                      │ │
    │  │    - Comma-separated list      │ │
    │  └────────────────────────────────┘ │
    │                                      │
    │  ┌────────────────────────────────┐ │
    │  │ 7. Achievements (Dynamic)      │ │
    │  │    [Add Achievement] button    │ │
    │  │    - Title, Date, Description  │ │
    │  └────────────────────────────────┘ │
    └──────────┬───────────────────────────┘
               │
               ▼
        ┌──────────────┐
        │ Submit Form  │
        └──────┬───────┘
               │
               ▼
        ┌──────────────────┐
        │ Validate Data    │
        └──────┬───────────┘
               │
               ▼
        ┌──────────────────┐
        │ Save to MongoDB  │
        │ (ResumeDAO)      │
        └──────┬───────────┘
               │
               ▼
        ┌──────────────────┐
        │ Redirect to      │
        │ Dashboard        │
        └──────────────────┘

================================================================================

┌─────────────────────────────────────────────────────────────────────────────┐
│                         DASHBOARD OPERATIONS                                │
└─────────────────────────────────────────────────────────────────────────────┘

    ┌──────────────────────────────────────────┐
    │           Dashboard                      │
    │                                          │
    │  ┌────────────────────────────────────┐ │
    │  │  Resume Card 1                     │ │
    │  │  Title: "Software Engineer Resume" │ │
    │  │  Template: Modern                  │ │
    │  │  Updated: Nov 8, 2025              │ │
    │  │                                    │ │
    │  │  [Preview] [Edit] [PDF] [XML]     │ │
    │  │  [Delete]                          │ │
    │  └────────────────────────────────────┘ │
    │                                          │
    │  ┌────────────────────────────────────┐ │
    │  │  Resume Card 2                     │ │
    │  │  Title: "Data Analyst Resume"      │ │
    │  │  Template: Classic                 │ │
    │  │  Updated: Nov 5, 2025              │ │
    │  │                                    │ │
    │  │  [Preview] [Edit] [PDF] [XML]     │ │
    │  │  [Delete]                          │ │
    │  └────────────────────────────────────┘ │
    │                                          │
    │  [Create New Resume]                    │
    └──────────────────────────────────────────┘
            │       │       │       │       │
            │       │       │       │       │
    ┌───────┘       │       │       │       └───────┐
    │               │       │       │               │
    ▼               ▼       ▼       ▼               ▼
┌────────┐   ┌────────┐ ┌─────┐ ┌─────┐     ┌────────┐
│Preview │   │ Edit   │ │ PDF │ │ XML │     │Delete  │
│Resume  │   │Resume  │ │Down │ │Down │     │Resume  │
└────────┘   └────────┘ └─────┘ └─────┘     └────────┘

================================================================================

┌─────────────────────────────────────────────────────────────────────────────┐
│                         RESUME EDIT FLOW (FIXED)                            │
└─────────────────────────────────────────────────────────────────────────────┘

    ┌──────────────────┐
    │ User clicks      │
    │ "Edit" button    │
    └────────┬─────────┘
             │
             ▼
    ┌──────────────────────┐
    │ GET /resume/edit/{id}│
    │ ResumeServlet        │
    └────────┬─────────────┘
             │
             ▼
    ┌──────────────────────┐
    │ Fetch Resume from    │
    │ MongoDB by ID        │
    └────────┬─────────────┘
             │
             ▼
    ┌──────────────────────┐
    │ Load edit-resume.jsp │
    │ - Pre-fill form data │
    │ - Set resume ID      │
    │ - Load resume JSON   │
    └────────┬─────────────┘
             │
             ▼
    ┌──────────────────────┐
    │ JavaScript populates │
    │ dynamic sections:    │
    │ - Education entries  │
    │ - Experience entries │
    │ - Project entries    │
    │ - Achievement entries│
    └────────┬─────────────┘
             │
             ▼
    ┌──────────────────────┐
    │ User modifies data   │
    │ and clicks "Update"  │
    └────────┬─────────────┘
             │
             ▼
    ┌──────────────────────┐
    │ Form submission:     │
    │ POST /resume/update/ │
    │      {resumeId}      │
    │                      │
    │ ✓ Context path       │
    │   extracted via JS   │
    │ ✓ Correct endpoint   │
    └────────┬─────────────┘
             │
             ▼
    ┌──────────────────────┐
    │ ResumeServlet        │
    │ doPost() method      │
    │ - Detects /update/   │
    │ - Extracts resume ID │
    └────────┬─────────────┘
             │
             ▼
    ┌──────────────────────┐
    │ Build Resume object  │
    │ from form data       │
    │ - Set existing ID    │
    └────────┬─────────────┘
             │
             ▼
    ┌──────────────────────┐
    │ ResumeDAO.update()   │
    │ - MongoDB update     │
    │ - Same document ID   │
    │ ✓ No new entry       │
    └────────┬─────────────┘
             │
             ▼
    ┌──────────────────────┐
    │ Redirect to          │
    │ Dashboard            │
    │ ✓ Updated resume     │
    └──────────────────────┘

================================================================================

┌─────────────────────────────────────────────────────────────────────────────┐
│                         PDF GENERATION FLOW                                 │
└─────────────────────────────────────────────────────────────────────────────┘

    ┌──────────────────┐
    │ User clicks      │
    │ "Download PDF"   │
    └────────┬─────────┘
             │
             ▼
    ┌──────────────────────┐
    │ DownloadServlet      │
    │ /download/pdf/{id}   │
    └────────┬─────────────┘
             │
             ▼
    ┌──────────────────────┐
    │ Fetch Resume from    │
    │ MongoDB (ResumeDAO)  │
    └────────┬─────────────┘
             │
             ▼
    ┌──────────────────────┐
    │ Check Template Type  │
    └────┬────────────┬────┘
         │            │
    Classic        Modern
         │            │
         ▼            ▼
    ┌─────────┐  ┌─────────┐
    │Generate │  │Generate │
    │Classic  │  │Modern   │
    │Template │  │Template │
    └────┬────┘  └────┬────┘
         │            │
         └────┬───────┘
              │
              ▼
    ┌──────────────────────┐
    │ PDFGenerator         │
    │ - Create Document    │
    │ - Add Header         │
    │ - Add Sections       │
    │ - Format Text        │
    │ - Apply Styling      │
    └────────┬─────────────┘
             │
             ▼
    ┌──────────────────────┐
    │ Convert to Bytes     │
    └────────┬─────────────┘
             │
             ▼
    ┌──────────────────────┐
    │ Set Response Headers │
    │ Content-Type: PDF    │
    │ Content-Disposition  │
    └────────┬─────────────┘
             │
             ▼
    ┌──────────────────────┐
    │ Send to Browser      │
    │ (File Download)      │
    └──────────────────────┘

================================================================================

┌─────────────────────────────────────────────────────────────────────────────┐
│                         XML GENERATION FLOW                                 │
└─────────────────────────────────────────────────────────────────────────────┘

    ┌──────────────────┐
    │ User clicks      │
    │ "Download XML"   │
    └────────┬─────────┘
             │
             ▼
    ┌──────────────────────┐
    │ DownloadServlet      │
    │ /download/xml/{id}   │
    └────────┬─────────────┘
             │
             ▼
    ┌──────────────────────┐
    │ Fetch Resume from    │
    │ MongoDB (ResumeDAO)  │
    └────────┬─────────────┘
             │
             ▼
    ┌──────────────────────┐
    │ XMLGenerator         │
    │ - Create XML Doc     │
    │ - Add Root Element   │
    │ - Add Personal Info  │
    │ - Add Education      │
    │ - Add Experience     │
    │ - Add Projects       │
    │ - Add Skills         │
    │ - Add Achievements   │
    └────────┬─────────────┘
             │
             ▼
    ┌──────────────────────┐
    │ Format XML           │
    │ (Pretty Print)       │
    └────────┬─────────────┘
             │
             ▼
    ┌──────────────────────┐
    │ Convert to String    │
    └────────┬─────────────┘
             │
             ▼
    ┌──────────────────────┐
    │ Set Response Headers │
    │ Content-Type: XML    │
    │ Content-Disposition  │
    └────────┬─────────────┘
             │
             ▼
    ┌──────────────────────┐
    │ Send to Browser      │
    │ (File Download)      │
    └──────────────────────┘

================================================================================

┌─────────────────────────────────────────────────────────────────────────────┐
│                         DATA FLOW ARCHITECTURE                              │
└─────────────────────────────────────────────────────────────────────────────┘

┌─────────────┐         ┌─────────────┐         ┌─────────────┐
│   Browser   │◄───────►│   Tomcat    │◄───────►│   MongoDB   │
│  (Client)   │         │  (Server)   │         │ (Database)  │
└─────────────┘         └─────────────┘         └─────────────┘
      │                       │                        │
      │                       │                        │
      │  HTTP Request         │                        │
      ├──────────────────────►│                        │
      │                       │                        │
      │                       │  Query Data            │
      │                       ├───────────────────────►│
      │                       │                        │
      │                       │  Return Data           │
      │                       │◄───────────────────────┤
      │                       │                        │
      │                       │  Process Data          │
      │                       │  (Servlets/JSP)        │
      │                       │                        │
      │  HTTP Response        │                        │
      │◄──────────────────────┤                        │
      │  (HTML/PDF/XML)       │                        │
      │                       │                        │

================================================================================

┌─────────────────────────────────────────────────────────────────────────────┐
│                         COMPONENT INTERACTION                               │
└─────────────────────────────────────────────────────────────────────────────┘

┌──────────────────────────────────────────────────────────────────────────┐
│                            PRESENTATION LAYER                            │
│  ┌────────┐  ┌────────┐  ┌────────┐  ┌────────┐  ┌────────┐           │
│  │Login   │  │Signup  │  │Dashboard│ │Create  │  │Edit    │           │
│  │JSP     │  │JSP     │  │JSP      │ │Resume  │  │Resume  │           │
│  └────────┘  └────────┘  └────────┘  │JSP     │  │JSP     │           │
│                                       └────────┘  └────────┘           │
└──────────────────────────────────────────────────────────────────────────┘
                                  │
                                  ▼
┌──────────────────────────────────────────────────────────────────────────┐
│                            CONTROLLER LAYER                              │
│  ┌────────────┐  ┌────────────┐  ┌────────────┐  ┌────────────┐       │
│  │Login       │  │Signup      │  │Dashboard   │  │Resume      │       │
│  │Servlet     │  │Servlet     │  │Servlet     │  │Servlet     │       │
│  └────────────┘  └────────────┘  └────────────┘  └────────────┘       │
│                                                                          │
│  ┌────────────┐  ┌────────────┐                                        │
│  │Download    │  │Logout      │                                        │
│  │Servlet     │  │Servlet     │                                        │
│  └────────────┘  └────────────┘                                        │
└──────────────────────────────────────────────────────────────────────────┘
                                  │
                                  ▼
┌──────────────────────────────────────────────────────────────────────────┐
│                            SERVICE LAYER                                 │
│  ┌────────────┐  ┌────────────┐  ┌────────────┐                        │
│  │UserDAO     │  │ResumeDAO   │  │MongoDB     │                        │
│  │            │  │            │  │Util        │                        │
│  └────────────┘  └────────────┘  └────────────┘                        │
│                                                                          │
│  ┌────────────┐  ┌────────────┐                                        │
│  │PDF         │  │XML         │                                        │
│  │Generator   │  │Generator   │                                        │
│  └────────────┘  └────────────┘                                        │
└──────────────────────────────────────────────────────────────────────────┘
                                  │
                                  ▼
┌──────────────────────────────────────────────────────────────────────────┐
│                            DATA LAYER                                    │
│  ┌────────────┐  ┌────────────┐  ┌────────────┐  ┌────────────┐       │
│  │User        │  │Resume      │  │Education   │  │Experience  │       │
│  │Model       │  │Model       │  │Model       │  │Model       │       │
│  └────────────┘  └────────────┘  └────────────┘  └────────────┘       │
│                                                                          │
│  ┌────────────┐  ┌────────────┐  ┌────────────┐                        │
│  │Project     │  │Achievement │  │Personal    │                        │
│  │Model       │  │Model       │  │Info Model  │                        │
│  └────────────┘  └────────────┘  └────────────┘                        │
└──────────────────────────────────────────────────────────────────────────┘
                                  │
                                  ▼
┌──────────────────────────────────────────────────────────────────────────┐
│                            DATABASE                                      │
│                         MongoDB (NoSQL)                                  │
│                                                                          │
│  ┌─────────────────┐         ┌─────────────────┐                       │
│  │ users           │         │ resumes         │                       │
│  │ Collection      │         │ Collection      │                       │
│  └─────────────────┘         └─────────────────┘                       │
└──────────────────────────────────────────────────────────────────────────┘

================================================================================

┌─────────────────────────────────────────────────────────────────────────────┐
│                         SESSION MANAGEMENT                                  │
└─────────────────────────────────────────────────────────────────────────────┘

    Login Success
         │
         ▼
    ┌─────────────────┐
    │ Create Session  │
    │ - Generate ID   │
    │ - Store User    │
    │ - Set Timeout   │
    └────────┬────────┘
             │
             ▼
    ┌─────────────────┐
    │ Set Cookie      │
    │ JSESSIONID      │
    └────────┬────────┘
             │
             ▼
    ┌─────────────────────────────┐
    │ Every Request:              │
    │ 1. Check Session Exists     │
    │ 2. Validate Session         │
    │ 3. Check Timeout            │
    │ 4. Refresh Activity         │
    └────────┬────────────────────┘
             │
        ┌────┴────┐
        │         │
    Valid     Invalid
        │         │
        ▼         ▼
    Allow    Redirect
    Access   to Login

================================================================================
                          END OF APPLICATION FLOW
================================================================================
